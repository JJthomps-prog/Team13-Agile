<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Article Page</title>
</head>
<body>

  <h1>Latest News</h1>

  <!-- Display news article details -->
  <h2>Article Details</h2>
  <% if (articleDetails.length > 0) { %>
    <p>Title: <%= articleDetails[0].Title %></p>
    <p>Author: <%= articleDetails[0].Author %></p>
    <p>Date: <%= articleDetails[0].PublicationDate %></p>
    <p>Content: <%= articleDetails[0].Content %></p>
  <% } else { %>
    <p>No article details available.</p>
  <% } %>

  <!-- Display existing comments -->
  <h2>Reader Comments</h2>
  <ul>
    <% if (existingComments.length === 0) { %>
      <p>No comments available for this article.</p>
    <% } else { %>
      <% existingComments.forEach((comment) => { %>
        <li>
          <strong>User:</strong> <%= comment.username %><br>
          <strong>Comment:</strong> <%= comment.content %>
          <!-- Include a button to delete the comment -->
          <form action="/deleteArticleComment/<%= comment.id %>" method="POST">
            <input type="hidden" name="articleId" value="<%= articleDetails[0].id %>">
            <button type="submit">Delete Comment</button>
          </form>
        </li>
      <% }); %>
    <% } %>
  </ul>

  <!-- Create a new comment -->
  <h2>Post a New Comment</h2>
  <form action="/createArticleComment" method="POST">

    <label for="articleId">Article ID:</label>
    <% if (articleDetails && articleDetails.length > 0) { %>
      <input type="text" id="articleId" name="articleId" value="<%= articleDetails[0].id %>" required readonly><br>
    <% } else { %>
      <input type="text" id="articleId" name="articleId" required readonly><br>
    <% } %>
    
    <label for="content">Comment Content:</label>
    <textarea id="content" name="content" required></textarea><br>

    <button type="submit">Submit Comment</button>
  </form>

</body>
</html>
